{"ast":null,"code":"import axios from \"axios\";\nimport { toast } from \"react-toastify\";\nconst request = axios.create({\n  //  baseURL: \"https://web1.anasource.com/BookStore/api/BookStore/\", // url = base url + request url\n  //   baseURL: \"http://localhost:5000/\",\n  baseURL: \"https://book-e-sell-node-api.vercel.app/\",\n  // baseURL: \"https://helperland1.azurewebsites.net/\",\n  // baseURL: \"https://helperland1.azurewebsites.net/\",\n  //  baseURL: \"http://192.168.1.20/\",\n  timeout: 12400000,\n  responseType: \"json\"\n});\nlet requests = [];\nlet conflictRequest = \"\";\n\n// Request interceptors Customize based on your need\nrequest.interceptors.request.use(async config => {\n  if (config.headers) {\n    config.headers[\"Content-Type\"] = \"application/json\";\n  }\n  if (config.headers[\"isDisableLoader\"] !== true) {\n    requests.push(config.url);\n    showLoader();\n  }\n  return config;\n}, error => {\n  alert(error);\n  Promise.reject(error);\n});\n\n// Response interceptors Customize based on your need\nrequest.interceptors.response.use(response => {\n  const {\n    data\n  } = response;\n  console.log(\"responseeee,\", response);\n  removeRequest(response.config.url);\n  if (data !== null && data !== void 0 && data.code && (data === null || data === void 0 ? void 0 : data.code) !== 200) {\n    var _response$data$error;\n    toast.error((_response$data$error = response.data.error) !== null && _response$data$error !== void 0 ? _response$data$error : \"Somthing went wrong. Please try again!\");\n    return Promise.reject(new Error((data === null || data === void 0 ? void 0 : data.error) || \"Error\"));\n  } else {\n    return Promise.resolve(response.data.result);\n  }\n}, error => {\n  var _error$response$data$, _error$response, _error$response$data;\n  removeRequest(error.config.url);\n  toast.error((_error$response$data$ = error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) !== null && _error$response$data$ !== void 0 ? _error$response$data$ : \"Somthing went wrong\");\n  return Promise.reject(error);\n});\nfunction showLoader() {\n  document.body.classList.add(\"loader-open\");\n}\nfunction hideLoader() {\n  document.body.classList.remove(\"loader-open\");\n}\n\n// remove completed request\nfunction removeRequest(req) {\n  const i = requests.indexOf(req);\n  if (i >= 0) {\n    requests.splice(i, 1);\n  }\n  if (requests.length > 0) {\n    showLoader();\n  } else {\n    hideLoader();\n  }\n  if (req === conflictRequest) {\n    conflictRequest = \"\";\n    requests = requests.filter(request => request !== req);\n  }\n}\nexport default request;","map":{"version":3,"names":["axios","toast","request","create","baseURL","timeout","responseType","requests","conflictRequest","interceptors","use","config","headers","push","url","showLoader","error","alert","Promise","reject","response","data","console","log","removeRequest","code","Error","resolve","result","document","body","classList","add","hideLoader","remove","req","i","indexOf","splice","length","filter"],"sources":["/Users/shyamkatariya/Developer/TatvaSoft/Bookstore/src/service/request.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst request = axios.create({\r\n  //  baseURL: \"https://web1.anasource.com/BookStore/api/BookStore/\", // url = base url + request url\r\n  //   baseURL: \"http://localhost:5000/\",\r\n  baseURL: \"https://book-e-sell-node-api.vercel.app/\",\r\n  // baseURL: \"https://helperland1.azurewebsites.net/\",\r\n  // baseURL: \"https://helperland1.azurewebsites.net/\",\r\n  //  baseURL: \"http://192.168.1.20/\",\r\n  timeout: 12400000,\r\n  responseType: \"json\",\r\n});\r\n\r\nlet requests = [];\r\nlet conflictRequest = \"\";\r\n\r\n// Request interceptors Customize based on your need\r\nrequest.interceptors.request.use(\r\n  async (config) => {\r\n    if (config.headers) {\r\n      config.headers[\"Content-Type\"] = \"application/json\";\r\n    }\r\n\r\n    if (config.headers[\"isDisableLoader\"] !== true) {\r\n      requests.push(config.url);\r\n      showLoader();\r\n    }\r\n\r\n    return config;\r\n  },\r\n  (error) => {\r\n    alert(error);\r\n    Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Response interceptors Customize based on your need\r\nrequest.interceptors.response.use(\r\n  (response) => {\r\n    const { data } = response;\r\n    console.log(\"responseeee,\", response);\r\n    removeRequest(response.config.url);\r\n    if (data?.code && data?.code !== 200) {\r\n      toast.error(\r\n        response.data.error ?? \"Somthing went wrong. Please try again!\"\r\n      );\r\n      return Promise.reject(new Error(data?.error || \"Error\"));\r\n    } else {\r\n      return Promise.resolve(response.data.result);\r\n    }\r\n  },\r\n  (error) => {\r\n    removeRequest(error.config.url);\r\n    toast.error(error?.response?.data?.error ?? \"Somthing went wrong\");\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nfunction showLoader() {\r\n  document.body.classList.add(\"loader-open\");\r\n}\r\n\r\nfunction hideLoader() {\r\n  document.body.classList.remove(\"loader-open\");\r\n}\r\n\r\n// remove completed request\r\nfunction removeRequest(req) {\r\n  const i = requests.indexOf(req);\r\n  if (i >= 0) {\r\n    requests.splice(i, 1);\r\n  }\r\n  if (requests.length > 0) {\r\n    showLoader();\r\n  } else {\r\n    hideLoader();\r\n  }\r\n  if (req === conflictRequest) {\r\n    conflictRequest = \"\";\r\n    requests = requests.filter((request) => request !== req);\r\n  }\r\n}\r\n\r\nexport default request;\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,KAAK,QAAQ,gBAAgB;AAEtC,MAAMC,OAAO,GAAGF,KAAK,CAACG,MAAM,CAAC;EAC3B;EACA;EACAC,OAAO,EAAE,0CAA0C;EACnD;EACA;EACA;EACAC,OAAO,EAAE,QAAQ;EACjBC,YAAY,EAAE;AAChB,CAAC,CAAC;AAEF,IAAIC,QAAQ,GAAG,EAAE;AACjB,IAAIC,eAAe,GAAG,EAAE;;AAExB;AACAN,OAAO,CAACO,YAAY,CAACP,OAAO,CAACQ,GAAG,CAC9B,MAAOC,MAAM,IAAK;EAChB,IAAIA,MAAM,CAACC,OAAO,EAAE;IAClBD,MAAM,CAACC,OAAO,CAAC,cAAc,CAAC,GAAG,kBAAkB;EACrD;EAEA,IAAID,MAAM,CAACC,OAAO,CAAC,iBAAiB,CAAC,KAAK,IAAI,EAAE;IAC9CL,QAAQ,CAACM,IAAI,CAACF,MAAM,CAACG,GAAG,CAAC;IACzBC,UAAU,EAAE;EACd;EAEA,OAAOJ,MAAM;AACf,CAAC,EACAK,KAAK,IAAK;EACTC,KAAK,CAACD,KAAK,CAAC;EACZE,OAAO,CAACC,MAAM,CAACH,KAAK,CAAC;AACvB,CAAC,CACF;;AAED;AACAd,OAAO,CAACO,YAAY,CAACW,QAAQ,CAACV,GAAG,CAC9BU,QAAQ,IAAK;EACZ,MAAM;IAAEC;EAAK,CAAC,GAAGD,QAAQ;EACzBE,OAAO,CAACC,GAAG,CAAC,cAAc,EAAEH,QAAQ,CAAC;EACrCI,aAAa,CAACJ,QAAQ,CAACT,MAAM,CAACG,GAAG,CAAC;EAClC,IAAIO,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAEI,IAAI,IAAI,CAAAJ,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEI,IAAI,MAAK,GAAG,EAAE;IAAA;IACpCxB,KAAK,CAACe,KAAK,yBACTI,QAAQ,CAACC,IAAI,CAACL,KAAK,uEAAI,wCAAwC,CAChE;IACD,OAAOE,OAAO,CAACC,MAAM,CAAC,IAAIO,KAAK,CAAC,CAAAL,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEL,KAAK,KAAI,OAAO,CAAC,CAAC;EAC1D,CAAC,MAAM;IACL,OAAOE,OAAO,CAACS,OAAO,CAACP,QAAQ,CAACC,IAAI,CAACO,MAAM,CAAC;EAC9C;AACF,CAAC,EACAZ,KAAK,IAAK;EAAA;EACTQ,aAAa,CAACR,KAAK,CAACL,MAAM,CAACG,GAAG,CAAC;EAC/Bb,KAAK,CAACe,KAAK,0BAACA,KAAK,aAALA,KAAK,0CAALA,KAAK,CAAEI,QAAQ,4EAAf,gBAAiBC,IAAI,yDAArB,qBAAuBL,KAAK,yEAAI,qBAAqB,CAAC;EAClE,OAAOE,OAAO,CAACC,MAAM,CAACH,KAAK,CAAC;AAC9B,CAAC,CACF;AAED,SAASD,UAAU,GAAG;EACpBc,QAAQ,CAACC,IAAI,CAACC,SAAS,CAACC,GAAG,CAAC,aAAa,CAAC;AAC5C;AAEA,SAASC,UAAU,GAAG;EACpBJ,QAAQ,CAACC,IAAI,CAACC,SAAS,CAACG,MAAM,CAAC,aAAa,CAAC;AAC/C;;AAEA;AACA,SAASV,aAAa,CAACW,GAAG,EAAE;EAC1B,MAAMC,CAAC,GAAG7B,QAAQ,CAAC8B,OAAO,CAACF,GAAG,CAAC;EAC/B,IAAIC,CAAC,IAAI,CAAC,EAAE;IACV7B,QAAQ,CAAC+B,MAAM,CAACF,CAAC,EAAE,CAAC,CAAC;EACvB;EACA,IAAI7B,QAAQ,CAACgC,MAAM,GAAG,CAAC,EAAE;IACvBxB,UAAU,EAAE;EACd,CAAC,MAAM;IACLkB,UAAU,EAAE;EACd;EACA,IAAIE,GAAG,KAAK3B,eAAe,EAAE;IAC3BA,eAAe,GAAG,EAAE;IACpBD,QAAQ,GAAGA,QAAQ,CAACiC,MAAM,CAAEtC,OAAO,IAAKA,OAAO,KAAKiC,GAAG,CAAC;EAC1D;AACF;AAEA,eAAejC,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}